(this.webpackJsonpbsc_admin_backeend=this.webpackJsonpbsc_admin_backeend||[]).push([[22],{1092:function(e,t,a){},1413:function(e,t,a){"use strict";a.r(t);a(515);var n=a(518),r=(a(242),a(102)),i=(a(241),a(177)),c=(a(85),a(27)),l=(a(613),a(612)),o=(a(497),a(496)),s=(a(239),a(74)),u=(a(240),a(141)),m=a(16),d=a(43),p=a(44),f=a(56),h=a(55),y=(a(511),a(514)),b=(a(506),a(510)),g=a(0),E=a.n(g),_=a(38);function v(e){return Object(_.a)({url:"/prizeContest/findRecord",method:"POST",data:e})}function w(e){return Object(_.a)({url:"/prize/getPrizeDetail",method:"POST",data:e})}a(176);var k=a(99),I=(a(21),a(1092),a(2)),S=a.n(I),C=a(178),O=a(7),D=a(96),j=a(29);function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var M=function(e){var t,a=e.child,n=e.bordered,r=e.colon,i=e.type,c=e.layout,l=a.props,o=l.prefixCls,s=l.label,u=l.className,m=l.children,d=l.span,p=void 0===d?1:d,f={className:S()("".concat(o,"-item-label"),(t={},x(t,"".concat(o,"-item-colon"),r),x(t,"".concat(o,"-item-no-label"),!s),t)),key:"label"};return"vertical"===c&&(f.colSpan=2*p-1),n?"label"===i?g.createElement("th",f,s):g.createElement("td",{className:S()("".concat(o,"-item-content"),u),key:"content",colSpan:2*p-1},m):"vertical"===c?"content"===i?g.createElement("td",{colSpan:p,className:S()("".concat(o,"-item"),u)},g.createElement("span",{className:"".concat(o,"-item-content"),key:"content"},m)):g.createElement("td",{colSpan:p,className:S()("".concat(o,"-item"),u)},g.createElement("span",{className:S()("".concat(o,"-item-label"),x({},"".concat(o,"-item-colon"),r)),key:"label"},s)):g.createElement("td",{colSpan:p,className:S()("".concat(o,"-item"),u)},g.createElement("span",f,s),g.createElement("span",{className:"".concat(o,"-item-content"),key:"content"},m))};function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e){return(N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=A(e);if(t){var r=A(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return T(this,a)}}function T(e,t){return!t||"object"!==N(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e){return e?Object(C.a)(e).reduce((function(e,t){return t&&t.type===g.Fragment?e.concat(L(t.props.children)):(e.push(t),e)}),[]):[]}var U={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},V=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(i,e);var t,a,n,r=Y(i);function i(){var e;return Q(this,i),(e=r.apply(this,arguments)).state={screens:{}},e}return t=i,(a=[{key:"componentDidMount",value:function(){var e=this,t=this.props.column;this.token=D.a.subscribe((function(a){"object"===N(t)&&e.setState({screens:a})}))}},{key:"componentWillUnmount",value:function(){D.a.unsubscribe(this.token)}},{key:"getColumn",value:function(){var e=this.props.column;if("object"===N(e))for(var t=0;t<D.b.length;t++){var a=D.b[t];if(this.state.screens[a]&&void 0!==e[a])return e[a]||U[a]}return"number"===typeof e?e:3}},{key:"render",value:function(){var e=this;return g.createElement(j.a,null,(function(t){var a,n=t.getPrefixCls,r=e.props,i=r.className,c=r.prefixCls,l=r.title,o=r.size,s=r.children,u=r.bordered,m=void 0!==u&&u,d=r.layout,p=void 0===d?"horizontal":d,f=r.colon,h=void 0===f||f,y=r.style,b=n("descriptions",c),E=e.getColumn(),_=function(e,t){var a,n=[],r=null,i=L(e);return i.forEach((function(e,c){var l=e;r||(a=t,r=[],n.push(r));var o=!0;c===i.length-1&&(o=!l.props.span||l.props.span===a,l=g.cloneElement(l,{span:a}));var s=l.props.span,u=void 0===s?1:s;r.push(l),(a-=u)<=0&&(r=null,Object(O.a)(0===a&&o,"Descriptions","Sum of column `span` in a line exceeds `column` of Descriptions."))})),n}(L(s).map((function(e){return g.isValidElement(e)?g.cloneElement(e,{prefixCls:b}):null})).filter((function(e){return e})),E);return g.createElement("div",{className:S()(b,i,(a={},P(a,"".concat(b,"-").concat(o),"default"!==o),P(a,"".concat(b,"-bordered"),!!m),a)),style:y},l&&g.createElement("div",{className:"".concat(b,"-title")},l),g.createElement("div",{className:"".concat(b,"-view")},g.createElement("table",null,g.createElement("tbody",null,_.map((function(e,t){return function(e,t,a,n,r,i){var c=a.prefixCls,l=function(e,t,a){return g.createElement(M,{child:e,bordered:n,colon:i,type:t,key:"".concat(t,"-").concat(e.key||a),layout:r})},o=[],s=[];return L(e).forEach((function(e,t){o.push(l(e,"label",t)),"vertical"===r?s.push(l(e,"content",t)):n&&o.push(l(e,"content",t))})),"vertical"===r?[g.createElement("tr",{className:"".concat(c,"-row"),key:"label-".concat(t)},o),g.createElement("tr",{className:"".concat(c,"-row"),key:"content-".concat(t)},s)]:g.createElement("tr",{className:"".concat(c,"-row"),key:t},o)}(e,t,{prefixCls:b},m,p,h)}))))))}))}}])&&R(t.prototype,a),n&&R(t,n),i}(g.Component);V.defaultProps={size:"default",column:U},V.Item=function(e){return e.children};var W=V,J=a(140),F=a.n(J);a(504);F.a.locale("zh-cn");F()().format("YYYY-MM-DD");var K=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._isMounted=!1,e.state={loading:!1,detail:{}},e.fetchData=function(t){e.setState({loading:!0}),w({id:t}).then((function(t){e.setState({loading:!1});var a=t.data.data;e._isMounted&&e.setState({detail:a})}))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,"0"!=this.props.currentRowData.id&&this.fetchData(this.props.currentRowData.id)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentWillReceiveProps",value:function(e){"0"!=e.currentRowData.id&&e.currentRowData.id!=this.props.id&&this.fetchData(e.currentRowData.id)}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.confirmLoading,r=e.currentRowData,i=(r.id,r.prize_contest_id,r.account_id,r.date),c=r.is_through,l=r.asset_num,o=(r.problem_set,r.username),s=(r.avatar,r.state,r.updated_at,r.setting_name,r.entry_num,r.topic_num,r.created_at),u=r.setting_is_through,m=r.is_asset_award_section,d=r.is_asset_award,p=r.setting_asset_num,f=["A","B","C","D","E","F","G","H"];return E.a.createElement(k.a,{title:"\u8be6\u60c5",visible:t,onOk:a,onCancel:a,confirmLoading:n},E.a.createElement(W,{title:"\u7b54\u9898\u4fe1\u606f"},E.a.createElement(W.Item,{span:3,label:"\u7528\u6237\u540d\u79f0"},o),E.a.createElement(W.Item,{span:3,label:"\u7b54\u9898\u65e5\u671f"},i),E.a.createElement(W.Item,{span:3,label:"\u662f\u5426\u901a\u5173"},"1"==c?"\u662f":"\u5426"),E.a.createElement(W.Item,{span:3,label:"\u7b54\u9898\u989d\u5ea6"},l),E.a.createElement(W.Item,{span:3,label:"\u7b54\u9898\u65f6\u95f4"},s)),E.a.createElement(W,{title:"\u914d\u7f6e"},E.a.createElement(W.Item,{span:3,label:"\u56de\u7b54\u5168\u90e8\u9898\u76ee"},"1"==u?"\u662f":"\u5426"),E.a.createElement(W.Item,{span:3,label:"\u662f\u5426\u5206\u6bb5\u7ed3\u7b97\u8d44\u4ea7\u5956\u52b1"},"1"==m?"\u662f":"\u5426"),E.a.createElement(W.Item,{span:3,label:"\u662f\u5426\u8d44\u4ea7\u5956\u52b1"},"1"==d?"\u6709":"\u65e0"),E.a.createElement(W.Item,{span:3,label:"\u8d44\u4ea7\u5956\u52b1\u989d\u5ea6"},p)),E.a.createElement(W,{title:"\u9898\u76ee"},E.a.createElement(W.Item,{span:3,label:"\u662f\u5426\u5206\u6bb5\u7ed3\u7b97\u8d44\u4ea7\u5956\u52b1"},"1"==m?"\u662f":"\u5426"),E.a.createElement(W.Item,{span:3,label:"\u662f\u5426\u8d44\u4ea7\u5956\u52b1"},"1"==d?"\u6709":"\u65e0"),E.a.createElement(W.Item,{span:3,label:"\u8d44\u4ea7\u5956\u52b1\u989d\u5ea6"},p)),E.a.createElement(W,{title:"\u7b54\u9898\u7ed3\u679c"}),this.state.detail.item_list?this.state.detail.item_list.map((function(e,t){var a="\u9898\u76ee"+(parseInt(t)+1)+":";return E.a.createElement(W,{key:t,title:a},E.a.createElement(W.Item,{span:3,label:"\u9898\u76ee\u7c7b\u578b"},"text"==e.topic.type?"\u6587\u672c":"","graphic"==e.topic.type?"\u56fe\u6587":"","pic"==e.topic.type?"\u56fe\u7247":"","video"==e.topic.type?"\u89c6\u9891":""),E.a.createElement(W.Item,{span:3,label:"\u9898\u76ee"},e.topic.title),E.a.createElement(W.Item,{span:3,label:"\u7b54\u9898\u7c7b\u578b"},"choice"==e.topic.answer_type?"\u9009\u62e9":"","dupChoice"==e.topic.answer_type?"\u591a\u9009":"","judge"==e.topic.answer_type?"\u5224\u65ad":""),E.a.createElement(W.Item,{span:3,align:"top",label:"\u7b54\u6848\u9009\u62e9"}),E.a.createElement(W.Item,{span:3,align:"top"},e.topic.content.list?e.topic.content.list.map((function(e,t){return E.a.createElement("p",{key:t},f[t]+". "+e)})):""),E.a.createElement(W.Item,{span:3,label:"\u6b63\u786e\u7b54\u6848"},"number"==typeof e.topic.content.answer_num?f[e.topic.content.answer_num]:e.topic.content.answer_num.forEach((function(e){return f[e]+";"}))),E.a.createElement(W.Item,{span:3,label:"\u7b54\u9898\u60c5\u51b5"},"2"==e.state?"\u5df2\u7b54\u9898":"\u672a\u7b54\u9898"),"2"==e.state?E.a.createElement(W.Item,{span:3,label:"\u63d0\u4ea4\u7b54\u6848"},"dupChoice"!=e.topic.answer_type?f[e.draft]:Array.isArray(e.draft)?e.draft.forEach((function(e){return f[e]+";"})):""):"","2"==e.state?E.a.createElement(W.Item,{span:3,label:"\u6b63\u786e\u4e0e\u5426"},"1"==e.is_correct?"\u771f\u786e":"\u9519\u8bef"):"")})):"")}}]),a}(g.Component),B=b.a.Column,G=y.a.Panel,H=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._isMounted=!1,e.state={isEdit:!1,list:[],loading:!1,total:0,listQuery:{page:1,limit:10,state:1,username:"",is_through:"",start_date:"",end_date:""},editModalVisible:!1,editModalLoading:!1,currentRowData:{id:0,prize_contest_id:"",account_id:"",date:"",is_through:"",asset_num:"",problem_set:"",username:0,avatar:"",state:1,created_at:"",updated_at:"",setting_name:"",entry_num:"",topic_num:"",setting_is_through:"",is_asset_award_section:"",is_asset_award:"",setting_asset_num:""}},e.fetchData=function(){e.setState({loading:!0}),v(e.state.listQuery).then((function(t){e.setState({loading:!1});var a=t.data.data.list,n=t.data.data.total;e._isMounted&&e.setState({list:a,total:n})}))},e.filterUserNameChange=function(t){var a=t.target.value;e.setState((function(e){return{listQuery:Object(m.a)({},e.listQuery,{username:a})}}))},e.filterIsThroughChange=function(t){e.setState((function(e){return{listQuery:Object(m.a)({},e.listQuery,{is_through:t})}}))},e.filterDateStartChange=function(t){e.setState((function(e){return{listQuery:Object(m.a)({},e.listQuery,{date_start:t})}}))},e.filterDateEndChange=function(t){e.setState((function(e){return{listQuery:Object(m.a)({},e.listQuery,{date_end:t})}}))},e.filterStateChange=function(t){e.setState((function(e){return{listQuery:Object(m.a)({},e.listQuery,{state:t})}}))},e.changePage=function(t,a){e.setState((function(e){return{listQuery:Object(m.a)({},e.listQuery,{page:t})}}),(function(){e.fetchData()}))},e.changePageSize=function(t,a){e.setState((function(e){return{listQuery:Object(m.a)({},e.listQuery,{page:1,limit:a})}}),(function(){e.fetchData()}))},e.handleDetail=function(t){e.setState({currentRowData:Object.assign({},t),editModalVisible:!0})},e.handleCancel=function(t){e.setState({editModalVisible:!1})},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.fetchData()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return E.a.createElement("div",{className:"app-container"},E.a.createElement(y.a,{defaultActiveKey:["1"]},E.a.createElement(G,{header:"\u7b5b\u9009",key:"1"},E.a.createElement(s.a,{layout:"inline"},E.a.createElement(s.a.Item,{label:"\u7528\u6237\u540d\u79f0:"},E.a.createElement(u.a,{onChange:this.filterUserNameChange})),E.a.createElement(s.a.Item,{label:"\u662f\u5426\u901a\u5173:"},E.a.createElement(o.a,{style:{width:120},onChange:this.filterIsThroughChange},E.a.createElement(o.a.Option,{value:""}),E.a.createElement(o.a.Option,{value:"1"},"\u662f"),E.a.createElement(o.a.Option,{value:"2"},"\u5426"))),E.a.createElement(s.a.Item,{style:{width:300},labelAlign:"right",label:"\u8d77\u59cb\u65f6\u95f4:"},E.a.createElement(l.a,{onChange:this.filterDateStartChange,showTime:!0,format:"YYYY-MM-DD"})),E.a.createElement(s.a.Item,{style:{width:300},labelAlign:"right",label:"\u622a\u6b62\u65f6\u95f4:"},E.a.createElement(l.a,{onChange:this.filterDateEndChange,showTime:!0,format:"YYYY-MM-DD"})),E.a.createElement(s.a.Item,{label:"\u72b6\u6001:"},E.a.createElement(o.a,{style:{width:120},onChange:this.filterStateChange},E.a.createElement(o.a.Option,{value:"1"},"\u5f00\u542f"),E.a.createElement(o.a.Option,{value:"2"},"\u5173\u95ed"))),E.a.createElement(s.a.Item,null,E.a.createElement(c.a,{type:"primary",icon:"search",onClick:this.fetchData},"\u641c\u7d22"))))),E.a.createElement("br",null),E.a.createElement(b.a,{bordered:!0,rowKey:function(e){return e.id},dataSource:this.state.list,loading:this.state.loading,pagination:!1,scroll:{x:1200,y:500}},E.a.createElement(B,{title:"\u5e8f\u53f7",dataIndex:"id",key:"id",width:100,align:"center",fixed:"left",sorter:function(e,t){return e.id-t.id}}),E.a.createElement(B,{title:"\u7528\u6237\u540d\u79f0",dataIndex:"username",key:"username",width:150,align:"center",fixed:"left"}),E.a.createElement(B,{title:"\u662f\u5426\u901a\u5173",dataIndex:"is_through",key:"is_through",width:120,align:"center",render:function(e){var t="1"==e?"green":"2"==e?"red":"";return E.a.createElement(i.a,{color:t,key:e},"1"==e?"\u662f":"\u5426")}}),E.a.createElement(B,{title:"\u8d44\u4ea7\u5956\u52b1\u989d\u5ea6",dataIndex:"asset_num",key:"asset_num",width:120,align:"center"}),E.a.createElement(B,{title:"\u7b54\u9898\u65f6\u95f4",dataIndex:"created_at",key:"created_at",width:150,align:"center"}),E.a.createElement(B,{title:"\u914d\u7f6e-\u51b2\u9876\u6807\u9898",dataIndex:"setting_name",key:"setting_name",width:150,align:"center"}),E.a.createElement(B,{title:"\u914d\u7f6e-\u6bcf\u65e5\u53c2\u4e0e\u540d\u989d",dataIndex:"entry_num",key:"entry_num",width:180,align:"center"}),E.a.createElement(B,{title:"\u914d\u7f6e-\u9898\u5e93\u6570\u76ee",dataIndex:"topic_num",key:"topic_num",width:150,align:"center"}),E.a.createElement(B,{title:"\u914d\u7f6e-\u56de\u7b54\u5168\u90e8\u9898\u76ee",dataIndex:"setting_is_through",key:"setting_is_through",width:180,align:"center",render:function(e){var t="1"==e?"green":"2"==e?"red":"";return E.a.createElement(i.a,{color:t,key:e},"1"==e?"\u662f":"\u5426")}}),E.a.createElement(B,{title:"\u914d\u7f6e-\u662f\u5426\u5206\u6bb5\u7ed3\u7b97\u8d44\u4ea7\u5956\u52b1",dataIndex:"is_asset_award_section",key:"is_asset_award_section",width:220,align:"center",render:function(e){var t="1"==e?"green":"2"==e?"red":"";return E.a.createElement(i.a,{color:t,key:e},"1"==e?"\u662f":"\u5426")}}),E.a.createElement(B,{title:"\u914d\u7f6e-\u662f\u5426\u8d44\u4ea7\u5956\u52b1",dataIndex:"is_asset_award",key:"is_asset_award",width:180,align:"center",render:function(e){var t="1"==e?"green":"2"==e?"red":"";return E.a.createElement(i.a,{color:t,key:e},"1"==e?"\u6709":"\u65e0")}}),E.a.createElement(B,{title:"\u914d\u7f6e-\u8d44\u4ea7\u5956\u52b1\u989d\u5ea6",dataIndex:"setting_asset_num",key:"setting_asset_num",width:180,align:"center"}),E.a.createElement(B,{title:"\u64cd\u4f5c",key:"action",width:100,align:"center",fixed:"right",render:function(t,a){return E.a.createElement("span",null,E.a.createElement(c.a,{type:"primary",shape:"circle",icon:"info",title:"\u67e5\u770b\u8be6\u60c5",onClick:e.handleDetail.bind(null,a)}),E.a.createElement(r.a,{type:"vertical"}))}})),E.a.createElement("br",null),E.a.createElement(n.a,{total:this.state.total,pageSizeOptions:["10","20","40"],showTotal:function(e){return"\u5171".concat(e,"\u6761\u6570\u636e")},onChange:this.changePage,current:this.state.listQuery.page,onShowSizeChange:this.changePageSize,showSizeChanger:!0,showQuickJumper:!0,hideOnSinglePage:!0}),E.a.createElement(K,{currentRowData:this.state.currentRowData,visible:this.state.editModalVisible,confirmLoading:this.state.editModalLoading,onCancel:this.handleCancel}))}}]),a}(g.Component);t.default=H}}]);