(this.webpackJsonpbsc_admin_backeend=this.webpackJsonpbsc_admin_backeend||[]).push([[20],{1412:function(e,t,a){"use strict";a.r(t);a(502);var n=a(505),i=(a(240),a(102)),r=(a(239),a(177)),l=(a(86),a(28)),c=(a(585),a(584)),s=(a(485),a(484)),o=(a(237),a(69)),u=(a(238),a(142)),d=(a(98),a(41)),h=a(16),m=a(43),g=a(44),f=a(56),y=a(55),E=(a(500),a(501)),p=(a(493),a(496)),b=a(0),_=a.n(b),C=a(38);function S(e){return Object(C.a)({url:"/prizeContest/findRecord",method:"POST",data:e})}var w=p.a.Column,v=E.a.Panel,O=function(e){Object(f.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i)))._isMounted=!1,e.state={isEdit:!1,list:[],loading:!1,total:0,listQuery:{page:1,limit:10,state:1,username:"",is_through:"",start_date:"",end_date:""},editModalVisible:!1,editModalLoading:!1,currentRowData:{id:0,prize_contest_id:"",account_id:"",date:"",is_through:"",asset_num:"",problem_set:"",username:0,avatar:"",state:1,created_at:"",updated_at:""}},e.fetchData=function(){e.setState({loading:!0}),S(e.state.listQuery).then((function(t){e.setState({loading:!1});var a=t.data.data.list,n=t.data.data.total;e._isMounted&&e.setState({list:a,total:n})}))},e.filterUserNameChange=function(t){var a=t.target.value;e.setState((function(e){return{listQuery:Object(h.a)({},e.listQuery,{username:a})}}))},e.filterIsThroughChange=function(t){e.setState((function(e){return{listQuery:Object(h.a)({},e.listQuery,{is_through:t})}}))},e.filterDateStartChange=function(t){e.setState((function(e){return{listQuery:Object(h.a)({},e.listQuery,{date_start:t})}}))},e.filterDateEndChange=function(t){e.setState((function(e){return{listQuery:Object(h.a)({},e.listQuery,{date_end:t})}}))},e.filterStateChange=function(t){e.setState((function(e){return{listQuery:Object(h.a)({},e.listQuery,{state:t})}}))},e.changePage=function(t,a){e.setState((function(e){return{listQuery:Object(h.a)({},e.listQuery,{page:t})}}),(function(){e.fetchData()}))},e.changePageSize=function(t,a){e.setState((function(e){return{listQuery:Object(h.a)({},e.listQuery,{page:1,limit:a})}}),(function(){e.fetchData()}))},e.handleDelete=function(t){(t.id,"deleteItem").then((function(t){d.a.success("\u5220\u9664\u6210\u529f"),e.fetchData()}))},e.handleEdit=function(t){e.setState({currentRowData:Object.assign({},t),editModalVisible:!0})},e.handleAdd=function(){e.setState({currentRowData:Object.assign({}),editModalVisible:!0})},e.handleCancel=function(t){e.setState({editModalVisible:!1})},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.fetchData()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return _.a.createElement("div",{className:"app-container"},_.a.createElement(E.a,{defaultActiveKey:["1"]},_.a.createElement(v,{header:"\u7b5b\u9009",key:"1"},_.a.createElement(o.a,{layout:"inline"},_.a.createElement(o.a.Item,{label:"\u7528\u6237\u540d\u79f0:"},_.a.createElement(u.a,{onChange:this.filterUserNameChange})),_.a.createElement(o.a.Item,{label:"\u662f\u5426\u901a\u5173:"},_.a.createElement(s.a,{style:{width:120},onChange:this.filterIsThroughChange},_.a.createElement(s.a.Option,{value:""}),_.a.createElement(s.a.Option,{value:"1"},"\u662f"),_.a.createElement(s.a.Option,{value:"2"},"\u5426"))),_.a.createElement(o.a.Item,{style:{width:300},labelAlign:"right",label:"\u8d77\u59cb\u65f6\u95f4:"},_.a.createElement(c.a,{onChange:this.filterDateStartChange,showTime:!0,format:"YYYY-MM-DD"})),_.a.createElement(o.a.Item,{style:{width:300},labelAlign:"right",label:"\u622a\u6b62\u65f6\u95f4:"},_.a.createElement(c.a,{onChange:this.filterDateEndChange,showTime:!0,format:"YYYY-MM-DD"})),_.a.createElement(o.a.Item,{label:"\u72b6\u6001:"},_.a.createElement(s.a,{style:{width:120},onChange:this.filterStateChange},_.a.createElement(s.a.Option,{value:"1"},"\u5f00\u542f"),_.a.createElement(s.a.Option,{value:"2"},"\u5173\u95ed"))),_.a.createElement(o.a.Item,null,_.a.createElement(l.a,{type:"primary",icon:"search",onClick:this.fetchData},"\u641c\u7d22")),_.a.createElement(o.a.Item,null,_.a.createElement(l.a,{type:"primary",icon:"add",onClick:this.handleAdd},"\u6dfb\u52a0\u51b2\u9876\u914d\u7f6e"))))),_.a.createElement("br",null),_.a.createElement(p.a,{bordered:!0,rowKey:function(e){return e.id},dataSource:this.state.list,loading:this.state.loading,pagination:!1},_.a.createElement(w,{title:"\u5e8f\u53f7",dataIndex:"id",key:"id",width:100,align:"center",sorter:function(e,t){return e.id-t.id}}),_.a.createElement(w,{title:"\u7528\u6237\u540d\u79f0",dataIndex:"username",key:"username",width:150,align:"center"}),_.a.createElement(w,{title:"\u662f\u5426\u901a\u5173",dataIndex:"is_through",key:"is_through",width:120,align:"center",render:function(e){var t="1"==e?"green":"2"==e?"red":"";return _.a.createElement(r.a,{color:t,key:e},"1"==e?"\u662f":"\u5426")}}),_.a.createElement(w,{title:"\u8d44\u4ea7\u5956\u52b1\u989d\u5ea6",dataIndex:"asset_num",key:"asset_num",width:120,align:"center"}),_.a.createElement(w,{title:"\u7b54\u9898\u65f6\u95f4",dataIndex:"created_at",key:"created_at",width:150,align:"center"}),_.a.createElement(w,{title:"\u64cd\u4f5c",key:"action",width:195,align:"center",render:function(t,a){return _.a.createElement("span",null,_.a.createElement(l.a,{type:"primary",shape:"circle",icon:"edit",title:"\u7f16\u8f91",onClick:e.handleEdit.bind(null,a)}),_.a.createElement(i.a,{type:"vertical"}),_.a.createElement(l.a,{type:"primary",shape:"circle",icon:"delete",title:"\u5220\u9664",onClick:e.handleDelete.bind(null,a)}))}})),_.a.createElement("br",null),_.a.createElement(n.a,{total:this.state.total,pageSizeOptions:["10","20","40"],showTotal:function(e){return"\u5171".concat(e,"\u6761\u6570\u636e")},onChange:this.changePage,current:this.state.listQuery.page,onShowSizeChange:this.changePageSize,showSizeChanger:!0,showQuickJumper:!0,hideOnSinglePage:!0}))}}]),a}(b.Component);t.default=O}}]);